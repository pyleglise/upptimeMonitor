# Change these first
owner: pyleglise # Your GitHub organization or username, where this repository lives
repo: upptimeMonitor # The name of this repository

# Configuration des intervalles de surveillance
schedules:
  uptime: "*/5 * * * *"      # Toutes les 5 minutes
  graphs: "*/5 * * * *"       # Toutes les 5 minutes  
  summary: "*/5 * * * *"      # Toutes les 5 minutes

sites:
  - name: axialdata
    url: https://www.axialdata.net/presentation
    check: "keyword"
    keyword: "A propos de axialdata"
  - name: CFF to PDF API via Fly.io
    url: https://cff-to-pdf-api.fly.dev/api/v2/webhook/connect
    check: "keyword"
    keyword: "Authorized users only"
  - name: Claire Debourg Arbitration
    url: https://www.cdarbitration.com
  - name: Vitrail Martinique
    url: https://www.vitrailmartinique.com
  - name: Ma Pause Mieux Etre
    url: https://www.mapausemieuxetre.fr

status-website:
  # Add your custom domain name, or remove the `cname` line if you don't have a domain
  # Uncomment the `baseUrl` line if you don't have a custom domain and add your repo name there
  # cname: demo.upptime.js.org
  baseUrl: /upptimeMonitor
  logoUrl: https://raw.githubusercontent.com/upptime/upptime.js.org/master/static/img/icon.svg
  name: "Moniteur de Statut"
  introTitle: "**Surveillance axialdata**"
  introMessage: "Surveillance en temps r√©el des services de axialdata"
  navbar:
    - title: Status
      href: /upptimeMonitor/
    - title: Force Check
      href: https://github.com/$OWNER/$REPO/actions/workflows/uptime.yml
    - title: axialdata
      href: https://www.axialdata.net
  # Ajout d'un script personnalis√© pour afficher les heures de v√©rification
  customCSS: |
    .check-times {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
      text-align: center;
    }
    .check-times h3 {
      margin: 0 0 10px 0;
      color: #495057;
    }
    .check-times p {
      margin: 5px 0;
      font-size: 14px;
    }
  customJS: |
    function createCheckTimesWidget() {
      // Cr√©er le widget s'il n'existe pas d√©j√†
      if (!document.getElementById('check-times-widget')) {
        const widget = document.createElement('div');
        widget.id = 'check-times-widget';
        widget.className = 'check-times';
        widget.innerHTML = `
          <h3>üïê Horaires de v√©rification</h3>
          <p><strong>Derni√®re v√©rification :</strong> <span id="last-check">Calcul en cours...</span></p>
          <p><strong>Prochaine v√©rification :</strong> <span id="next-check">Calcul en cours...</span></p>
        `;
        
        // Ins√©rer le widget en haut de la page
        const container = document.querySelector('.container') || document.body;
        container.insertBefore(widget, container.firstChild);
      }
    }
    
    async function updateCheckTimes() {
      try {
        // Cr√©er le widget si n√©cessaire
        createCheckTimesWidget();
        
        // R√©cup√©rer les donn√©es de l'API Upptime
        const response = await fetch('./api/summary.json');
        const data = await response.json();
        
        if (data && data.length > 0) {
          // Calculer les heures bas√©es sur l'intervalle de 5 minutes
          const now = new Date();
          const lastCheck = new Date(now.getTime() - 5 * 60 * 1000);
          const nextCheck = new Date(now.getTime() + 5 * 60 * 1000);
          
          document.getElementById('last-check').textContent = lastCheck.toLocaleString('fr-FR');
          document.getElementById('next-check').textContent = nextCheck.toLocaleString('fr-FR');
        }
      } catch (error) {
        console.log('Erreur lors de la r√©cup√©ration des donn√©es:', error);
      }
    }
    
    // Cr√©er le widget au chargement de la page
    document.addEventListener('DOMContentLoaded', createCheckTimesWidget);
    
    // Mettre √† jour toutes les minutes
    setInterval(updateCheckTimes, 60000);
    updateCheckTimes();

# Upptime also supports notifications, assigning issues, and more
# See https://upptime.js.org/docs/configuration
